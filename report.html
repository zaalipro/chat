<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Widget Codebase Analysis Report</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --bg-secondary: white;
            --text-primary: #333;
            --text-secondary: #666;
            --text-light: white;
            --border-color: #ecf0f1;
            --card-bg: #f8f9fa;
            --header-color: #2c3e50;
            --shadow-color: rgba(0,0,0,0.1);
            --progress-bg: #ecf0f1;
        }

        [data-theme="dark"] {
            --bg-primary: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            --bg-secondary: #1e1e2e;
            --text-primary: #e0e0e0;
            --text-secondary: #a0a0a0;
            --text-light: #ffffff;
            --border-color: #2a2a3e;
            --card-bg: #2a2a3e;
            --header-color: #e0e0e0;
            --shadow-color: rgba(0,0,0,0.3);
            --progress-bg: #2a2a3e;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: var(--bg-primary);
            min-height: 100vh;
            transition: all 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 50px;
            padding: 12px 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 16px;
            color: var(--text-primary);
            box-shadow: 0 4px 15px var(--shadow-color);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .theme-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px var(--shadow-color);
        }

        .theme-toggle .icon {
            font-size: 20px;
            transition: transform 0.3s ease;
        }

        .theme-toggle:hover .icon {
            transform: rotate(20deg);
        }

        .header {
            text-align: center;
            color: var(--text-light);
            margin-bottom: 40px;
            animation: fadeInDown 0.8s ease;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: var(--bg-secondary);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px var(--shadow-color);
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            animation: fadeInUp 0.8s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px var(--shadow-color);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 1rem;
        }

        .critical { color: #e74c3c; }
        .warning { color: #f39c12; }
        .info { color: #3498db; }
        .success { color: #27ae60; }

        .section {
            background: var(--bg-secondary);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px var(--shadow-color);
            animation: fadeInUp 0.8s ease;
        }

        .section h2 {
            color: var(--header-color);
            margin-bottom: 20px;
            font-size: 1.8rem;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }

        .issue-card {
            border-left: 4px solid;
            padding: 20px;
            margin-bottom: 20px;
            background: var(--card-bg);
            border-radius: 0 10px 10px 0;
            transition: all 0.3s ease;
        }

        .issue-card:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px var(--shadow-color);
        }

        .issue-card.critical { border-left-color: #e74c3c; }
        .issue-card.high { border-left-color: #f39c12; }
        .issue-card.medium { border-left-color: #3498db; }
        .issue-card.low { border-left-color: #27ae60; }

        .issue-title {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: var(--header-color);
        }

        .issue-description {
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        .issue-location {
            font-family: 'Courier New', monospace;
            background: var(--border-color);
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .severity-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            text-transform: uppercase;
            margin-bottom: 10px;
        }

        .severity-badge.critical { background: #e74c3c; color: white; }
        .severity-badge.high { background: #f39c12; color: white; }
        .severity-badge.medium { background: #3498db; color: white; }
        .severity-badge.low { background: #27ae60; color: white; }

        .recommendation {
            background: rgba(39, 174, 96, 0.1);
            border: 1px solid #27ae60;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
        }

        .recommendation strong {
            color: #27ae60;
        }

        .security-card {
            background: rgba(243, 156, 18, 0.1);
            border: 1px solid #f39c12;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .security-card h3 {
            color: #f39c12;
            margin-bottom: 10px;
        }

        .architecture-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .architecture-item {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #3498db;
        }

        .architecture-item h4 {
            color: var(--header-color);
            margin-bottom: 10px;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: var(--progress-bg);
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            transition: width 0.5s ease;
        }

        .progress-fill.critical { background: linear-gradient(90deg, #e74c3c, #c0392b); }
        .progress-fill.high { background: linear-gradient(90deg, #f39c12, #e67e22); }
        .progress-fill.medium { background: linear-gradient(90deg, #3498db, #2980b9); }
        .progress-fill.low { background: linear-gradient(90deg, #27ae60, #229954); }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .footer {
            text-align: center;
            color: var(--text-light);
            margin-top: 40px;
            padding: 20px;
            opacity: 0.8;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .section {
                padding: 20px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }

            .theme-toggle {
                top: 10px;
                right: 10px;
                padding: 8px 15px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle dark mode">
        <span class="icon">üåô</span>
        <span class="text">Dark Mode</span>
    </button>

    <div class="container">
        <header class="header">
            <h1>üîç Codebase Analysis Report</h1>
            <p>Chat Widget - Comprehensive Code Quality & Security Assessment</p>
            <p>Generated on November 9, 2025</p>
        </header>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number critical">12</div>
                <div class="stat-label">Critical Issues</div>
            </div>
            <div class="stat-card">
                <div class="stat-number high">8</div>
                <div class="stat-label">High Priority Issues</div>
            </div>
            <div class="stat-card">
                <div class="stat-number medium">15</div>
                <div class="stat-label">Medium Priority Issues</div>
            </div>
            <div class="stat-card">
                <div class="stat-number low">6</div>
                <div class="stat-label">Low Priority Issues</div>
            </div>
        </div>

        <section class="section">
            <h2>üö® Critical Security Issues</h2>
            
            <div class="issue-card critical">
                <div class="severity-badge critical">Critical</div>
                <div class="issue-title">CSP Policy Contains Unsafe Directives</div>
                <div class="issue-description">
                    The Content Security Policy allows 'unsafe-inline' and 'unsafe-eval' which creates XSS vulnerabilities. Styled Components requires unsafe-inline for styles, but unsafe-eval should be removed.
                </div>
                <div class="issue-location">vite.config.js:21-22</div>
                <div class="recommendation">
                    <strong>Recommendation:</strong> Remove 'unsafe-eval' from script-src and consider using nonce-based CSP for better security.
                </div>
            </div>

            <div class="issue-card critical">
                <div class="severity-badge critical">Critical</div>
                <div class="issue-title">Token Storage in Global Window Object</div>
                <div class="issue-description">
                    Sensitive authentication tokens are being stored in window.REACT_APP_PUBLIC_KEY and other global variables, making them accessible to any script on the page.
                </div>
                <div class="issue-location">src/widget.js:27-31</div>
                <div class="recommendation">
                    <strong>Recommendation:</strong> Avoid storing sensitive data in global variables. Use secure storage mechanisms only.
                </div>
            </div>

            <div class="issue-card critical">
                <div class="severity-badge critical">Critical</div>
                <div class="issue-title">Insufficient Input Validation</div>
                <div class="issue-description">
                    While DOMPurify is used, the sanitization configuration allows no tags but doesn't validate message content length or structure before processing.
                </div>
                <div class="issue-location">src/utils/sanitize.js:8-17</div>
                <div class="recommendation">
                    <strong>Recommendation:</strong> Implement stricter validation rules and rate limiting for message submissions.
                </div>
            </div>

            <div class="issue-card critical">
                <div class="severity-badge critical">Critical</div>
                <div class="issue-title">WebSocket Connection Without Proper Authentication Validation</div>
                <div class="issue-description">
                    WebSocket connections use tokens but don't validate token expiration or refresh mechanisms properly.
                </div>
                <div class="issue-location">src/widget.js:71-104</div>
                <div class="recommendation">
                    <strong>Recommendation:</strong> Implement token refresh logic and proper WebSocket authentication validation.
                </div>
            </div>
        </section>

        <section class="section">
            <h2>‚ö†Ô∏è High Priority Issues</h2>
            
            <div class="issue-card high">
                <div class="severity-badge high">High</div>
                <div class="issue-title">Memory Leaks in Apollo Cache</div>
                <div class="issue-description">
                    Apollo cache configuration has size limits but the cleanup mechanism may not be sufficient for long-running applications with high message volume.
                </div>
                <div class="issue-location">src/widget.js:115-189</div>
                <div class="recommendation">
                    <strong>Recommendation:</strong> Implement more aggressive cache cleanup and consider cache partitioning by chat ID.
                </div>
            </div>

            <div class="issue-card high">
                <div class="severity-badge high">High</div>
                <div class="issue-title">Event Listener Memory Leaks</div>
                <div class="issue-description">
                    MediaQuery event listeners are properly cleaned up, but other event listeners and timers may not be properly managed in all components.
                </div>
                <div class="issue-location">src/widget.js:271-272</div>
                <div class="recommendation">
                    <strong>Recommendation:</strong> Audit all components for proper cleanup of event listeners, timers, and subscriptions.
                </div>
            </div>

            <div class="issue-card high">
                <div class="severity-badge high">High</div>
                <div class="issue-title">Inconsistent Error Handling</div>
                <div class="issue-description">
                    Error handling patterns vary across components, with some errors being logged but not properly propagated to users.
                </div>
                <div class="issue-location">Multiple files</div>
                <div class="recommendation">
                    <strong>Recommendation:</strong> Implement a centralized error handling strategy with consistent user feedback.
                </div>
            </div>

            <div class="issue-card high">
                <div class="severity-badge high">High</div>
                <div class="issue-title">Subscription Cleanup Race Conditions</div>
                <div class="issue-description">
                    WebSocket subscriptions are cleaned up on unmount, but race conditions may occur during rapid component updates.
                </div>
                <div class="issue-location">src/ChatContainer.js:42-49</div>
                <div class="recommendation">
                    <strong>Recommendation:</strong> Implement subscription cleanup guards and debouncing for rapid updates.
                </div>
            </div>
        </section>

        <section class="section">
            <h2>üìä Code Quality Issues</h2>
            
            <div class="issue-card medium">
                <div class="severity-badge medium">Medium</div>
                <div class="issue-title">Inconsistent Code Style</div>
                <div class="issue-description">
                    Mixed use of function declarations, arrow functions, and inconsistent spacing patterns throughout the codebase.
                </div>
                <div class="issue-location">Multiple files</div>
                <div class="recommendation">
                    <strong>Recommendation:</strong> Configure ESLint with stricter rules and implement Prettier for consistent formatting.
                </div>
            </div>

            <div class="issue-card medium">
                <div class="severity-badge medium">Medium</div>
                <div class="issue-title">Large Component Files</div>
                <div class="issue-description">
                    Some components like widget.js (405 lines) are too large and handle multiple responsibilities.
                </div>
                <div class="issue-location">src/widget.js</div>
                <div class="recommendation">
                    <strong>Recommendation:</strong> Break down large components into smaller, focused components with single responsibilities.
                </div>
            </div>

            <div class="issue-card medium">
                <div class="severity-badge medium">Medium</div>
                <div class="issue-title">Magic Numbers and Hard-coded Values</div>
                <div class="issue-description">
                    Hard-coded values like cache sizes, timeouts, and limits are scattered throughout the code.
                </div>
                <div class="issue-location">Multiple files</div>
                <div class="recommendation">
                    <strong>Recommendation:</strong> Extract magic numbers to configuration constants with meaningful names.
                </div>
            </div>

            <div class="issue-card medium">
                <div class="severity-badge medium">Medium</div>
                <div class="issue-title">Missing Prop Validation</div>
                <div class="issue-description">
                    React components lack proper PropTypes or TypeScript for runtime type checking.
                </div>
                <div class="issue-location">Multiple component files</div>
                <div class="recommendation">
                    <strong>Recommendation:</strong> Add PropTypes or migrate to TypeScript for better type safety.
                </div>
            </div>
        </section>

        <section class="section">
            <h2>üèóÔ∏è Architecture & Design Issues</h2>
            
            <div class="architecture-grid">
                <div class="architecture-item">
                    <h4>Tight Coupling</h4>
                    <p>Components are tightly coupled to specific implementations, making testing and maintenance difficult.</p>
                </div>
                
                <div class="architecture-item">
                    <h4>Mixed Concerns</h4>
                    <p>UI components contain business logic, API calls, and state management mixed together.</p>
                </div>
                
                <div class="architecture-item">
                    <h4>No Error Boundaries</h4>
                    <p>Lack of error boundaries means component failures can crash the entire application.</p>
                </div>
                
                <div class="architecture-item">
                    <h4>Global State Management</h4>
                    <p>Reliance on localStorage for state management without proper synchronization.</p>
                </div>
            </div>

            <div class="issue-card medium">
                <div class="severity-badge medium">Medium</div>
                <div class="issue-title">Missing Abstraction Layers</div>
                <div class="issue-description">
                    Direct Apollo Client usage throughout components instead of abstracted data access layers.
                </div>
                <div class="issue-location">Multiple component files</div>
                <div class="recommendation">
                    <strong>Recommendation:</strong> Create repository pattern or custom hooks for data access abstraction.
                </div>
            </div>

            <div class="issue-card medium">
                <div class="severity-badge medium">Medium</div>
                <div class="issue-title">Inconsistent State Management</div>
                <div class="issue-description">
                    Mix of local state, context, and localStorage without clear patterns for when to use each.
                </div>
                <div class="issue-location">Multiple files</div>
                <div class="recommendation">
                    <strong>Recommendation:</strong> Establish clear state management patterns and hierarchy.
                </div>
            </div>
        </section>

        <section class="section">
            <h2>üîí Security Recommendations</h2>
            
            <div class="security-card">
                <h3>Content Security Policy Enhancement</h3>
                <p>Implement stricter CSP with nonce-based approach for styled-components and remove unsafe-eval.</p>
            </div>

            <div class="security-card">
                <h3>Token Security</h3>
                <p>Implement proper token rotation, refresh mechanisms, and avoid global variable storage.</p>
            </div>

            <div class="security-card">
                <h3>Input Validation</h3>
                <p>Add comprehensive input validation, rate limiting, and content sanitization.</p>
            </div>

            <div class="security-card">
                <h3>WebSocket Security</h3>
                <p>Implement proper WebSocket authentication with token validation and connection monitoring.</p>
            </div>

            <div class="security-card">
                <h3>Dependency Security</h3>
                <p>Regularly audit dependencies for known vulnerabilities and implement automated security scanning.</p>
            </div>
        </section>

        <section class="section">
            <h2>üìà Performance Optimization</h2>
            
            <div class="issue-card medium">
                <div class="severity-badge medium">Medium</div>
                <div class="issue-title">Unnecessary Re-renders</div>
                <div class="issue-description">
                    Components lack proper memoization, causing unnecessary re-renders on prop changes.
                </div>
                <div class="issue-location">Multiple component files</div>
                <div class="recommendation">
                    <strong>Recommendation:</strong> Implement React.memo, useMemo, and useCallback where appropriate.
                </div>
            </div>

            <div class="issue-card medium">
                <div class="severity-badge medium">Medium</div>
                <div class="issue-title">Bundle Size Optimization</div>
                <div class="issue-description">
                    Large bundle size due to lack of code splitting and tree shaking optimization.
                </div>
                <div class="issue-location">vite.config.js</div>
                <div class="recommendation">
                    <strong>Recommendation:</strong> Implement dynamic imports and optimize bundle configuration.
                </div>
            </div>

            <div class="issue-card low">
                <div class="severity-badge low">Low</div>
                <div class="issue-title">Image Optimization</div>
                <div class="issue-description">
                    No image optimization strategy for avatars and other visual assets.
                </div>
                <div class="issue-location">Theme and component files</div>
                <div class="recommendation">
                    <strong>Recommendation:</strong> Implement lazy loading and modern image formats.
                </div>
            </div>
        </section>

        <section class="section">
            <h2>üß™ Testing & Quality Assurance</h2>
            
            <div class="issue-card high">
                <div class="severity-badge high">High</div>
                <div class="issue-title">Insufficient Test Coverage</div>
                <div class="issue-description">
                    Limited test coverage with only utility functions having proper tests. Critical components lack integration tests.
                </div>
                <div class="issue-location">src/utils/__tests__/</div>
                <div class="recommendation">
                    <strong>Recommendation:</strong> Implement comprehensive unit and integration tests for all components.
                </div>
            </div>

            <div class="issue-card medium">
                <div class="severity-badge medium">Medium</div>
                <div class="issue-title">Missing E2E Tests</div>
                <div class="issue-description">
                    No end-to-end tests to verify complete user flows and integration scenarios.
                </div>
                <div class="issue-location">Test suite</div>
                <div class="recommendation">
                    <strong>Recommendation:</strong> Add Cypress or Playwright for E2E testing of critical user journeys.
                </div>
            </div>

            <div class="issue-card medium">
                <div class="severity-badge medium">Medium</div>
                <div class="issue-title">No Performance Testing</div>
                <div class="issue-description">
                    Lack of performance testing to identify bottlenecks and memory leaks.
                </div>
                <div class="issue-location">Test suite</div>
                <div class="recommendation">
                    <strong>Recommendation:</strong> Implement performance testing with tools like Lighthouse CI.
                </div>
            </div>
        </section>

        <section class="section">
            <h2>üìã Action Items Priority Matrix</h2>
            
            <div style="margin-top: 20px;">
                <h3 style="color: #e74c3c; margin-bottom: 15px;">Immediate (This Sprint)</h3>
                <ul style="list-style: none; padding: 0;">
                    <li style="padding: 8px 0;">üî¥ Fix CSP unsafe-eval directive</li>
                    <li style="padding: 8px 0;">üî¥ Remove global token storage</li>
                    <li style="padding: 8px 0;">üî¥ Implement proper input validation</li>
                    <li style="padding: 8px 0;">üî¥ Fix WebSocket authentication</li>
                </ul>
            </div>

            <div style="margin-top: 20px;">
                <h3 style="color: #f39c12; margin-bottom: 15px;">Short Term (Next 2 Sprints)</h3>
                <ul style="list-style: none; padding: 0;">
                    <li style="padding: 8px 0;">üü† Implement comprehensive error handling</li>
                    <li style="padding: 8px 0;">üü† Fix memory leaks in subscriptions</li>
                    <li style="padding: 8px 0;">üü† Add component tests</li>
                    <li style="padding: 8px 0;">üü† Implement performance monitoring</li>
                </ul>
            </div>

            <div style="margin-top: 20px;">
                <h3 style="color: #3498db; margin-bottom: 15px;">Medium Term (Next Month)</h3>
                <ul style="list-style: none; padding: 0;">
                    <li style="padding: 8px 0;">üîµ Refactor large components</li>
                    <li style="padding: 8px 0;">üîµ Implement TypeScript migration</li>
                    <li style="padding: 8px 0;">üîµ Add E2E test suite</li>
                    <li style="padding: 8px 0;">üîµ Optimize bundle size</li>
                </ul>
            </div>
        </section>

        <section class="section">
            <h2>üìä Overall Health Score</h2>
            
            <div style="margin: 20px 0;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                    <span>Security</span>
                    <span style="color: #e74c3c; font-weight: bold;">45/100</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill critical" style="width: 45%;"></div>
                </div>
            </div>

            <div style="margin: 20px 0;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                    <span>Code Quality</span>
                    <span style="color: #f39c12; font-weight: bold;">65/100</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill high" style="width: 65%;"></div>
                </div>
            </div>

            <div style="margin: 20px 0;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                    <span>Architecture</span>
                    <span style="color: #3498db; font-weight: bold;">70/100</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill medium" style="width: 70%;"></div>
                </div>
            </div>

            <div style="margin: 20px 0;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                    <span>Testing</span>
                    <span style="color: #e74c3c; font-weight: bold;">35/100</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill critical" style="width: 35%;"></div>
                </div>
            </div>

            <div style="margin: 20px 0;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                    <span>Performance</span>
                    <span style="color: #3498db; font-weight: bold;">75/100</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill medium" style="width: 75%;"></div>
                </div>
            </div>

            <div style="margin: 30px 0; text-align: center;">
                <h3 style="color: var(--header-color); margin-bottom: 10px;">Overall Score</h3>
                <div style="font-size: 3rem; font-weight: bold; color: #f39c12;">58/100</div>
                <p style="color: var(--text-secondary); margin-top: 10px;">Needs Significant Improvement</p>
            </div>
        </section>

        <footer class="footer">
            <p>This report was generated automatically based on comprehensive codebase analysis.</p>
            <p>Regular code reviews and security audits are recommended for maintaining code quality.</p>
        </footer>
    </div>

    <script>
        // Theme toggle functionality
        function toggleTheme() {
            const html = document.documentElement;
            const themeToggle = document.querySelector('.theme-toggle');
            const icon = themeToggle.querySelector('.icon');
            const text = themeToggle.querySelector('.text');
            
            if (html.getAttribute('data-theme') === 'dark') {
                html.removeAttribute('data-theme');
                icon.textContent = 'üåô';
                text.textContent = 'Dark Mode';
                localStorage.removeItem('theme');
            } else {
                html.setAttribute('data-theme', 'dark');
                icon.textContent = '‚òÄÔ∏è';
                text.textContent = 'Light Mode';
                localStorage.setItem('theme', 'dark');
            }
        }

        // Check for saved theme preference or default to light mode
        document.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('theme');
            const themeToggle = document.querySelector('.theme-toggle');
            const icon = themeToggle.querySelector('.icon');
            const text = themeToggle.querySelector('.text');
            
            if (savedTheme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
                icon.textContent = '‚òÄÔ∏è';
                text.textContent = 'Light Mode';
            } else {
                icon.textContent = 'üåô';
                text.textContent = 'Dark Mode';
            }
        });

        // Add keyboard shortcut for theme toggle (Ctrl/Cmd + Shift + D)
        document.addEventListener('keydown', function(e) {
            if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === 'D') {
                e.preventDefault();
                toggleTheme();
            }
        });
    </script>
</body>
</html>