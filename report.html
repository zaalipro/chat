<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Widget Codebase Analysis Report</title>
    <style>
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --bg-card: #ffffff;
            --text-primary: #212529;
            --text-secondary: #6c757d;
            --border-color: #dee2e6;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --info: #17a2b8;
            --shadow: 0 2px 4px rgba(0,0,0,0.1);
            --shadow-hover: 0 4px 8px rgba(0,0,0,0.15);
            --transition: all 0.3s ease;
        }

        [data-theme="dark"] {
            --bg-primary: #121212;
            --bg-secondary: #1e1e1e;
            --bg-card: #1e1e1e;
            --text-primary: #e0e0e0;
            --text-secondary: #a0a0a0;
            --border-color: #333333;
            --success: #4caf50;
            --warning: #ff9800;
            --danger: #f44336;
            --info: #2196f3;
            --shadow: 0 2px 4px rgba(0,0,0,0.3);
            --shadow-hover: 0 4px 8px rgba(0,0,0,0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            transition: var(--transition);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            background: linear-gradient(135deg, var(--info), var(--success));
            color: white;
            padding: 2rem 0;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .theme-toggle {
            position: fixed;
            top: 2rem;
            right: 2rem;
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow);
            z-index: 1000;
        }

        .theme-toggle:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-hover);
        }

        .theme-toggle svg {
            width: 24px;
            height: 24px;
            fill: var(--text-primary);
        }

        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }

        .card-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
            font-size: 1.5rem;
        }

        .critical .card-icon { background: rgba(220, 53, 69, 0.1); color: var(--danger); }
        .high .card-icon { background: rgba(255, 193, 7, 0.1); color: var(--warning); }
        .medium .card-icon { background: rgba(23, 162, 184, 0.1); color: var(--info); }
        .low .card-icon { background: rgba(40, 167, 69, 0.1); color: var(--success); }

        .card-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .card-count {
            font-size: 2rem;
            font-weight: 700;
            margin: 0.5rem 0;
        }

        .critical .card-count { color: var(--danger); }
        .high .card-count { color: var(--warning); }
        .medium .card-count { color: var(--info); }
        .low .card-count { color: var(--success); }

        .section {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
        }

        .section-title {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: var(--text-primary);
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 0.5rem;
        }

        .finding-item {
            border-left: 4px solid var(--border-color);
            padding: 1rem 1.5rem;
            margin-bottom: 1rem;
            background: var(--bg-secondary);
            border-radius: 0 8px 8px 0;
            transition: var(--transition);
        }

        .finding-item:hover {
            background: var(--bg-primary);
            border-left-width: 6px;
        }

        .finding-item.critical { border-left-color: var(--danger); }
        .finding-item.high { border-left-color: var(--warning); }
        .finding-item.medium { border-left-color: var(--info); }
        .finding-item.low { border-left-color: var(--success); }

        .finding-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .finding-title {
            font-weight: 600;
            color: var(--text-primary);
        }

        .severity-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .severity-critical { background: rgba(220, 53, 69, 0.1); color: var(--danger); }
        .severity-high { background: rgba(255, 193, 7, 0.1); color: var(--warning); }
        .severity-medium { background: rgba(23, 162, 184, 0.1); color: var(--info); }
        .severity-low { background: rgba(40, 167, 69, 0.1); color: var(--success); }

        .finding-description {
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .finding-location {
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.85rem;
            color: var(--info);
            background: rgba(23, 162, 184, 0.1);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            display: inline-block;
        }

        .recommendation-list {
            list-style: none;
            padding: 0;
        }

        .recommendation-list li {
            padding: 0.5rem 0;
            color: var(--text-secondary);
            position: relative;
            padding-left: 1.5rem;
        }

        .recommendation-list li:before {
            content: "‚Üí";
            position: absolute;
            left: 0;
            color: var(--info);
            font-weight: bold;
        }

        .code-block {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.85rem;
            overflow-x: auto;
            color: var(--text-primary);
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .metric-item {
            text-align: center;
            padding: 1rem;
            background: var(--bg-secondary);
            border-radius: 8px;
        }

        .metric-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--info);
        }

        .metric-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-top: 0.25rem;
        }

        footer {
            text-align: center;
            padding: 2rem;
            color: var(--text-secondary);
            border-top: 1px solid var(--border-color);
            margin-top: 2rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .theme-toggle {
                top: 1rem;
                right: 1rem;
            }
        }
    </style>
</head>
<body>
    <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle dark mode">
        <svg class="sun-icon" viewBox="0 0 24 24">
            <path d="M12 17.5C9.5 17.5 7.5 15.5 7.5 13S9.5 8.5 12 8.5 16.5 10.5 16.5 13 14.5 17.5 12 17.5M12 7C8.7 7 6 9.7 6 13S8.7 19 12 19 18 16.3 18 13 15.3 7 12 7M12 2L14.4 6.4L19 5.7L15.8 9.2L16.8 13.7L12.7 11.6L8.5 13.7L9.5 9.2L6.3 5.7L10.9 6.4L12 2M3.3 7L7.7 5.5L6.8 1.5L3.3 3L3.3 7M3.3 17L6.8 18.5L7.7 14.5L3.3 16L3.3 17M20.7 17L20.7 16L16.3 14.5L17.2 18.5L20.7 17M20.7 7L17.2 5.5L16.3 1.5L20.7 3L20.7 7Z"/>
        </svg>
        <svg class="moon-icon" viewBox="0 0 24 24" style="display: none;">
            <path d="M17.75,4.09L15.22,6.03L16.13,9.09L13.5,7.28L10.87,9.09L11.78,6.03L9.25,4.09L12.44,4L13.5,1L14.56,4L17.75,4.09M21.25,11L19.61,12.25L20.2,14.23L18.5,13.06L16.8,14.23L17.39,12.25L15.75,11L17.81,10.95L18.5,9L19.19,10.95L21.25,11M18.97,15.95C19.8,15.87 20.69,17.05 20.16,17.8C19.84,18.25 19.5,18.67 19.08,19.07C15.17,23 8.84,23 4.94,19.07C1.03,15.17 1.03,8.83 4.94,4.93C5.34,4.53 5.76,4.17 6.21,3.85C6.96,3.32 8.14,4.21 8.06,5.04C7.79,7.9 8.75,10.87 10.95,13.06C13.14,15.26 16.1,16.22 18.97,15.95M17.33,17.97C14.5,17.81 11.7,16.64 9.53,14.5C7.36,12.31 6.2,9.5 6.04,6.68C3.23,9.82 3.34,14.64 6.35,17.66C9.37,20.67 14.19,20.78 17.33,17.97Z"/>
        </svg>
    </button>

    <header>
        <div class="container">
            <h1>Chat Widget Codebase Analysis</h1>
            <p class="subtitle">Comprehensive security, performance, and architectural review</p>
        </div>
    </header>

    <div class="container">
        <!-- Summary Cards -->
        <div class="summary-cards">
            <div class="card critical">
                <div class="card-header">
                    <div class="card-icon">üö®</div>
                    <div class="card-title">Critical Issues</div>
                </div>
                <div class="card-count">8</div>
                <div class="card-description">Immediate attention required</div>
            </div>
            <div class="card high">
                <div class="card-header">
                    <div class="card-icon">‚ö†Ô∏è</div>
                    <div class="card-title">High Priority</div>
                </div>
                <div class="card-count">12</div>
                <div class="card-description">Should be addressed soon</div>
            </div>
            <div class="card medium">
                <div class="card-header">
                    <div class="card-icon">‚ÑπÔ∏è</div>
                    <div class="card-title">Medium Priority</div>
                </div>
                <div class="card-count">15</div>
                <div class="card-description">Improvement opportunities</div>
            </div>
            <div class="card low">
                <div class="card-header">
                    <div class="card-icon">‚úÖ</div>
                    <div class="card-title">Low Priority</div>
                </div>
                <div class="card-count">9</div>
                <div class="card-description">Minor enhancements</div>
            </div>
        </div>

        <!-- Project Overview -->
        <div class="section">
            <h2 class="section-title">üìä Project Overview</h2>
            <div class="metrics-grid">
                <div class="metric-item">
                    <div class="metric-value">44</div>
                    <div class="metric-label">Total Files</div>
                </div>
                <div class="metric-item">
                    <div class="metric-value">8.2k</div>
                    <div class="metric-label">Lines of Code</div>
                </div>
                <div class="metric-item">
                    <div class="metric-value">23</div>
                    <div class="metric-label">useEffect Hooks</div>
                </div>
                <div class="metric-item">
                    <div class="metric-value">15</div>
                    <div class="metric-label">GraphQL Queries</div>
                </div>
                <div class="metric-item">
                    <div class="metric-value">6</div>
                    <div class="metric-label">Subscriptions</div>
                </div>
                <div class="metric-item">
                    <div class="metric-value">18</div>
                    <div class="metric-label">Components</div>
                </div>
            </div>
        </div>

        <!-- Memory Leaks & Performance Issues -->
        <div class="section">
            <h2 class="section-title">üî• Memory Leaks & Performance Issues</h2>
            
            <div class="finding-item critical">
                <div class="finding-header">
                    <span class="finding-title">Missing Dependency Arrays in useEffect</span>
                    <span class="severity-badge severity-critical">Critical</span>
                </div>
                <div class="finding-description">
                    Multiple useEffect hooks are missing proper dependency arrays, causing unnecessary re-renders and potential infinite loops.
                </div>
                <div class="finding-location">src/App.js:119, src/CreateChat.js:213, src/ChatContainer.js:36</div>
                <ul class="recommendation-list">
                    <li>Add proper dependency arrays to all useEffect hooks</li>
                    <li>Use ESLint react-hooks/exhaustive-deps rule</li>
                    <li>Consider using useCallback for functions used in dependencies</li>
                </ul>
                <div class="code-block">
// ‚ùå Bad: Missing dependencies
useEffect(() => {
    const loadTime = Date.now() - startTime.current;
    trackChunkLoading('AppContent', loadTime, true);
}, []); // Empty dependency array

// ‚úÖ Good: Proper dependencies
useEffect(() => {
    const loadTime = Date.now() - startTime.current;
    trackChunkLoading('AppContent', loadTime, true);
}, [trackChunkLoading]); // All dependencies included
                </div>
            </div>

            <div class="finding-item high">
                <div class="finding-header">
                    <span class="finding-title">Subscription Cleanup Issues</span>
                    <span class="severity-badge severity-high">High</span>
                </div>
                <div class="finding-description">
                    GraphQL subscriptions may not be properly cleaned up in all edge cases, leading to memory leaks.
                </div>
                <div class="finding-location">src/ChatContainer.js:28, src/ChatStatusMonitor.js:143</div>
                <ul class="recommendation-list">
                    <li>Implement consistent subscription cleanup patterns</li>
                    <li>Use useEffect cleanup functions for all subscriptions</li>
                    <li>Add error boundaries for subscription failures</li>
                </ul>
            </div>

            <div class="finding-item high">
                <div class="finding-header">
                    <span class="finding-title">Apollo Cache Growth</span>
                    <span class="severity-badge severity-high">High</span>
                </div>
                <div class="finding-description">
                    Apollo Client cache can grow indefinitely without proper eviction policies for long-running sessions.
                </div>
                <div class="finding-location">src/widget.js:233-243, src/utils/apollo-cache-monitor.js</div>
                <ul class="recommendation-list">
                    <li>Implement cache size limits and automatic cleanup</li>
                    <li>Add cache eviction policies for old data</li>
                    <li>Monitor cache growth in production</li>
                </ul>
            </div>

            <div class="finding-item medium">
                <div class="finding-header">
                    <span class="finding-title">Event Listener Memory Leaks</span>
                    <span class="severity-badge severity-medium">Medium</span>
                </div>
                <div class="finding-description">
                    Some event listeners may not be properly cleaned up, especially in error scenarios.
                </div>
                <div class="finding-location">src/widget.js:17-56, src/utils/lazy-components.js</div>
                <ul class="recommendation-list">
                    <li>Use custom useEventListener hook consistently</li>
                    <li>Ensure cleanup in all error paths</li>
                    <li>Add try-catch blocks around event handlers</li>
                </ul>
            </div>
        </div>

        <!-- Bug Fixes & Code Quality -->
        <div class="section">
            <h2 class="section-title">üêõ Bug Fixes & Code Quality Improvements</h2>
            
            <div class="finding-item critical">
                <div class="finding-header">
                    <span class="finding-title">Inconsistent Error Handling</span>
                    <span class="severity-badge severity-critical">Critical</span>
                </div>
                <div class="finding-description">
                    Error handling is inconsistent across components, with some errors silently failing and others showing generic messages.
                </div>
                <div class="finding-location">src/App.js:277-310, src/Components/Query.js:18-25</div>
                <ul class="recommendation-list">
                    <li>Implement centralized error handling utility</li>
                    <li>Create reusable ErrorBoundary components</li>
                    <li>Add user-friendly error messages with retry mechanisms</li>
                </ul>
            </div>

            <div class="finding-item high">
                <div class="finding-header">
                    <span class="finding-title">Missing PropTypes/TypeScript</span>
                    <span class="severity-badge severity-high">High</span>
                </div>
                <div class="finding-description">
                    Components lack proper prop validation, leading to runtime errors and difficult debugging.
                </div>
                <div class="finding-location">Multiple component files</div>
                <ul class="recommendation-list">
                    <li>Add PropTypes to all components</li>
                    <li>Consider migrating to TypeScript</li>
                    <li>Implement prop validation in development</li>
                </ul>
            </div>

            <div class="finding-item medium">
                <div class="finding-header">
                    <span class="finding-title">Duplicate Code Patterns</span>
                    <span class="severity-badge severity-medium">Medium</span>
                </div>
                <div class="finding-description">
                    Similar patterns for authentication, error handling, and data fetching are repeated across components.
                </div>
                <div class="finding-location">src/App.js, src/widget.js, src/hooks/</div>
                <ul class="recommendation-list">
                    <li>Create custom hooks for common patterns</li>
                    <li>Extract shared utilities</li>
                    <li>Implement higher-order components where appropriate</li>
                </ul>
            </div>

            <div class="finding-item medium">
                <div class="finding-header">
                    <span class="finding-title">Inconsistent Styling Approach</span>
                    <span class="severity-badge severity-medium">Medium</span>
                </div>
                <div class="finding-description">
                    Mix of styled-components, CSS classes, and inline styles creates maintenance challenges.
                </div>
                <div class="finding-location">src/Components/styled/, src/App.js, various components</div>
                <ul class="recommendation-list">
                    <li>Standardize on styled-components with design system</li>
                    <li>Create reusable styled components</li>
                    <li>Implement CSS custom properties for theming</li>
                </ul>
            </div>
        </div>

        <!-- Architectural Improvements -->
        <div class="section">
            <h2 class="section-title">üèóÔ∏è Architectural Improvements</h2>
            
            <div class="finding-item high">
                <div class="finding-header">
                    <span class="finding-title">Component Organization</span>
                    <span class="severity-badge severity-high">High</span>
                </div>
                <div class="finding-description">
                    Component structure could be improved with better separation of concerns and clearer responsibilities.
                </div>
                <div class="finding-location">src/ directory structure</div>
                <ul class="recommendation-list">
                    <li>Implement feature-based folder structure</li>
                    <li>Separate container and presentational components</li>
                    <li>Create shared component library</li>
                </ul>
            </div>

            <div class="finding-item high">
                <div class="finding-header">
                    <span class="finding-title">State Management Complexity</span>
                    <span class="severity-badge severity-high">High</span>
                </div>
                <div class="finding-description">
                    Mix of local state, Apollo cache, and localStorage creates complexity and potential sync issues.
                </div>
                <div class="finding-location">src/App.js, src/context/, src/utils/</div>
                <ul class="recommendation-list">
                    <li>Consolidate state management approach</li>
                    <li>Use Apollo cache as single source of truth</li>
                    <li>Implement proper state synchronization</li>
                </ul>
            </div>

            <div class="finding-item medium">
                <div class="finding-header">
                    <span class="finding-title">GraphQL Query Optimization</span>
                    <span class="severity-badge severity-medium">Medium</span>
                </div>
                <div class="finding-description">
                    GraphQL queries could be optimized with better fragment usage and query batching.
                </div>
                <div class="finding-location">src/queries.js</div>
                <ul class="recommendation-list">
                    <li>Optimize fragment structure</li>
                    <li>Implement query batching for related requests</li>
                    <li>Add query complexity analysis</li>
                </ul>
            </div>

            <div class="finding-item medium">
                <div class="finding-header">
                    <span class="finding-title">Bundle Size Optimization</span>
                    <span class="severity-badge severity-medium">Medium</span>
                </div>
                <div class="finding-description">
                    While lazy loading is implemented, there are opportunities for further bundle optimization.
                </div>
                <div class="finding-location">src/utils/lazy-components.js, vite.config.js</div>
                <ul class="recommendation-list">
                    <li>Implement code splitting at route level</li>
                    <li>Optimize moment.js usage (consider date-fns)</li>
                    <li>Add bundle analysis to CI/CD pipeline</li>
                </ul>
            </div>
        </div>

        <!-- Security Vulnerabilities -->
        <div class="section">
            <h2 class="section-title">üîí Security Vulnerabilities</h2>
            
            <div class="finding-item critical">
                <div class="finding-header">
                    <span class="finding-title">XSS Vulnerability in Message Rendering</span>
                    <span class="severity-badge severity-critical">Critical</span>
                </div>
                <div class="finding-description">
                    User-generated content in chat messages may not be properly sanitized before rendering.
                </div>
                <div class="finding-location">src/ChatMessage.js, src/MessageBox.js</div>
                <ul class="recommendation-list">
                    <li>Implement strict HTML sanitization</li>
                    <li>Use DOMPurify consistently</li>
                    <li>Add Content Security Policy headers</li>
                    <li>Validate and sanitize all user inputs</li>
                </ul>
            </div>

            <div class="finding-item high">
                <div class="finding-header">
                    <span class="finding-title">Token Storage Security</span>
                    <span class="severity-badge severity-high">High</span>
                </div>
                <div class="finding-description">
                    JWT tokens are stored in localStorage with fallback mechanisms that may compromise security.
                </div>
                <div class="finding-location">src/widget.js:159-172, src/utils/crypto.js</div>
                <ul class="recommendation-list">
                    <li>Use secure cookies with httpOnly flag</li>
                    <li>Implement token rotation mechanism</li>
                    <li>Add token expiration handling</li>
                    <li>Use Web Crypto API for encryption</li>
                </ul>
            </div>

            <div class="finding-item high">
                <div class="finding-header">
                    <span class="finding-title">CSP Implementation Gaps</span>
                    <span class="severity-badge severity-high">High</span>
                </div>
                <div class="finding-description">
                    Content Security Policy implementation has gaps that could allow script injection.
                </div>
                <div class="finding-location">src/utils/secure-csp.js, src/utils/styled-csp-integration.js</div>
                <ul class="recommendation-list">
                    <li>Implement strict CSP headers</li>
                    <li>Remove inline script dependencies</li>
                    <li>Add nonce-based script loading</li>
                    <li>Regular CSP policy review</li>
                </ul>
            </div>

            <div class="finding-item medium">
                <div class="finding-header">
                    <span class="finding-title">GraphQL Injection Risks</span>
                    <span class="severity-badge severity-medium">Medium</span>
                </div>
                <div class="finding-description">
                    User inputs in GraphQL queries may not be properly validated, allowing injection attacks.
                </div>
                <div class="finding-location">src/queries.js, src/CreateChat.js</div>
                <ul class="recommendation-list">
                    <li>Implement input validation middleware</li>
                    <li>Use parameterized queries</li>
                    <li>Add query complexity limits</li>
                    <li>Validate all user inputs server-side</li>
                </ul>
            </div>

            <div class="finding-item medium">
                <div class="finding-header">
                    <span class="finding-title">Insecure Random Number Generation</span>
                    <span class="severity-badge severity-medium">Medium</span>
                </div>
                <div class="finding-description">
                    Math.random() is used for generating chat keys and IDs, which is not cryptographically secure.
                </div>
                <div class="finding-location">src/utils/crypto.js, src/CreateChat.js</div>
                <ul class="recommendation-list">
                    <li>Use crypto.getRandomValues() for random generation</li>
                    <li>Implement UUID v4 generation</li>
                    <li>Use cryptographically secure libraries</li>
                </ul>
            </div>
        </div>

        <!-- Recommendations Summary -->
        <div class="section">
            <h2 class="section-title">üìã Priority Recommendations</h2>
            
            <h3 style="color: var(--danger); margin-bottom: 1rem;">üî¥ Critical (Fix Immediately)</h3>
            <ul class="recommendation-list">
                <li>Fix XSS vulnerability in message rendering</li>
                <li>Add proper dependency arrays to all useEffect hooks</li>
                <li>Implement consistent error handling across components</li>
                <li>Secure token storage mechanism</li>
            </ul>

            <h3 style="color: var(--warning); margin: 1.5rem 0 1rem 0;">üü° High Priority (Fix Soon)</h3>
            <ul class="recommendation-list">
                <li>Implement proper subscription cleanup</li>
                <li>Add PropTypes or migrate to TypeScript</li>
                <li>Optimize Apollo cache with size limits</li>
                <li>Strengthen CSP implementation</li>
                <li>Improve component organization</li>
            </ul>

            <h3 style="color: var(--info); margin: 1.5rem 0 1rem 0;">üîµ Medium Priority (Improvements)</h3>
            <ul class="recommendation-list">
                <li>Refactor duplicate code patterns</li>
                <li>Optimize GraphQL queries</li>
                <li>Standardize styling approach</li>
                <li>Implement better state management</li>
                <li>Add input validation middleware</li>
            </ul>

            <h3 style="color: var(--success); margin: 1.5rem 0 1rem 0;">üü¢ Low Priority (Enhancements)</h3>
            <ul class="recommendation-list">
                <li>Further bundle size optimization</li>
                <li>Add more comprehensive tests</li>
                <li>Improve documentation</li>
                <li>Add performance monitoring</li>
            </ul>
        </div>
    </div>

    <footer>
        <p>Generated on <span id="report-date"></span> | Chat Widget Codebase Analysis Report</p>
    </footer>

    <script>
        // Theme toggle functionality
        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            // Toggle icon visibility
            const sunIcon = document.querySelector('.sun-icon');
            const moonIcon = document.querySelector('.moon-icon');
            
            if (newTheme === 'dark') {
                sunIcon.style.display = 'none';
                moonIcon.style.display = 'block';
            } else {
                sunIcon.style.display = 'block';
                moonIcon.style.display = 'none';
            }
        }

        // Set initial theme
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);
        
        // Set initial icon state
        const sunIcon = document.querySelector('.sun-icon');
        const moonIcon = document.querySelector('.moon-icon');
        if (savedTheme === 'dark') {
            sunIcon.style.display = 'none';
            moonIcon.style.display = 'block';
        } else {
            sunIcon.style.display = 'block';
            moonIcon.style.display = 'none';
        }

        // Set report date
        document.getElementById('report-date').textContent = new Date().toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });

        // Smooth scrolling for internal links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
    </script>
</body>
</html>